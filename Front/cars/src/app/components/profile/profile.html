<div class="profile-container">
  <header class="profile-header">
    <div class="header-content">
      <h1>Mi Perfil</h1>
      
      <!-- Desktop Menu -->
      <div class="desktop-menu">
        <button class="btn btn-back" (click)="goBack()">
          ‚Üê Volver al Dashboard
        </button>
      </div>
      
      <!-- Mobile Menu Button -->
      <button class="mobile-menu-btn" (click)="toggleMobileMenu()" [class.active]="isMobileMenuOpen">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    
    <!-- Mobile Menu -->
    <div class="mobile-menu" [class.open]="isMobileMenuOpen">
      <div class="mobile-menu-content">
        <div class="mobile-menu-actions">
          <button class="btn btn-back" (click)="goBack(); closeMobileMenu()">
            ‚Üê Volver al Dashboard
          </button>
        </div>
      </div>
    </div>
  </header>

  <main class="profile-main">
    <!-- Indicador de carga -->
    <div class="loading-card" *ngIf="isLoading">
      <div class="spinner"></div>
      <h3>Cargando informaci√≥n del perfil...</h3>
    </div>

    <!-- Mensaje de error -->
    <div class="error-card" *ngIf="errorMessage && !isLoading">
      <h3>‚ö†Ô∏è Error</h3>
      <p>{{ errorMessage }}</p>
      <button class="btn btn-primary" (click)="loadUserProfile()">Reintentar</button>
    </div>

    <!-- Mensaje de √©xito -->
    <div class="success-card" *ngIf="successMessage && !isLoading">
      <h3>‚úÖ √âxito</h3>
      <p>{{ successMessage }}</p>
    </div>

    <!-- Contenido principal del perfil -->
    <div class="profile-card" *ngIf="!isLoading && !errorMessage && currentUser">
      <div class="profile-header-card">
        <div class="avatar">
          <span>{{ currentUser.username.charAt(0).toUpperCase() }}</span>
        </div>
        <div class="user-info">
          <h2>{{ currentUser.username }}</h2>
          <p>{{ currentUser.email }}</p>
        </div>
        <button 
          class="btn btn-edit" 
          (click)="startEditing()" 
          *ngIf="!isEditing">
          ‚úèÔ∏è Editar Perfil
        </button>
      </div>

      <div class="profile-details">
        <h3>Informaci√≥n Personal</h3>
        
        <div class="detail-section">
          <div class="detail-item">
            <label>Usuario:</label>
            <div class="detail-value" *ngIf="!isEditing">
              {{ currentUser.username }}
            </div>
            <input 
              type="text" 
              [(ngModel)]="editForm.username" 
              class="form-input"
              *ngIf="isEditing">
          </div>

          <div class="detail-item">
            <label>Email:</label>
            <div class="detail-value" *ngIf="!isEditing">
              {{ currentUser.email }}
            </div>
            <input 
              type="email" 
              [(ngModel)]="editForm.email" 
              class="form-input"
              *ngIf="isEditing">
          </div>

          <div class="detail-item">
            <label>ID de Usuario:</label>
            <div class="detail-value">
              {{ currentUser.id }}
            </div>
          </div>
        </div>

        <!-- Botones de acci√≥n cuando est√° editando -->
        <div class="action-buttons" *ngIf="isEditing">
          <button 
            class="btn btn-save" 
            (click)="saveProfile()"
            [disabled]="isLoading">
            üíæ Guardar Cambios
          </button>
          <button 
            class="btn btn-cancel" 
            (click)="cancelEditing()"
            [disabled]="isLoading">
            ‚ùå Cancelar
          </button>
        </div>
      </div>
    </div>
  </main>
</div>
